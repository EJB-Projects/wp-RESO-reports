ПРОБЛЕМЫ С КОТОРЫМИ СТОЛКНУЛСЯ:

1) БЛЯТЬ, это пиздец.... кто вообще на хер додумался сделать report id строковым значением в символах!!!!?????  То есть вот такого вида - DGO_os_new_agen. Почему бы не сделать как во всех нормальных БД некое числовое id (по хуй там long, int) к которому можно привязаться? О чем думал разработчик БД вообще? Как это бля индексировать? Как привязываться к такому индексу? Там вообще форейнкеи есть? Хз, может мне не всю табличку выдали, на все столбцы.... но в любом случае делать id блять отчета вот в таком извините виде - "DGO_os_new_agen" ну это полный пиздец. Это как минимум ключ HashMapы будет стринг и теперь мне бля переделывать value на стринг. Причем папка отчета у них нормальный числовой id, а сам отчет вот такой вот пиздец.... Ад просто.

2) Проблема номер 2. У них нет проблем вытащить id родительской папки у выбранного отчета, потому что id отчета уже строится по принципу N[id_родительской_папки]N[id_самого_отчета]. И судя по всему первый параметр там все время повторяется в рамках одной папки. Какие варианты решения этой проблемы:

а) сделать так же
б) написать функцию поиска (этот вариант конечно более затратный и с точки зрения ресурсов/производительности и с точки зрения траты времени на написание), на зто типа более красивый как мне кажется.

В итоге я все пошел вторым путем. Лично мне показалось это как то более элегантно и спортивно что ли.

3) Оказалось что в предыдущих ревизиях я напихал все отчеты в FolderReport (скосячил). Из-за этого потратил тупо день, пытаясь понять хули ж не работает метод getReportFolderByID. 

4) По началу, не зная чо это такое я сделал свой собственный конструктор отчета и поле folderId у меня там просто создается рандомно, вот так -  folderID = getRandomNumberInRange(2000, 100000). Ну getRandomNumberInRange - понятно, какая-то там моя самописная функция генерирования рандомных числе в диапазоне. Оказалось, что этот folderID - это типа parentId, то есть это ссылка на родительскую папку, в которой и лежит отчет. Поэтому пришлось сделать новый конструктор.

5) Дальше у них там началась логика с использованием JSF API, которое я есессенно блин не знаю. Обращение к контексту приложения, вытаскивание какого-то бина по имени. Ну и т.д. Я очень надеюсь, что JSF одинаково в этом контексте будет отрабатывать для Icefaces и для PrimeFaces.

6) В общем раскопал я их код там, который запускается после нажатия на ноду. Там Такая тема, что вася, тянет петю, Петя тянет Зину, Зина тянет Толю и так до бесконечности. Штук пять классов, наследующихся друг от друга дергают конструктор супер-класса в своем конструкторе и так далее. И все это наследуется от ResoRemote.... и играется UserSession так или иначе. Все эти игрища я закаментил и по сути там логика какая - взять сессию, если юзер не авторизован - выкинуть на хер и ралогинить его, если все ок с сессией, то просто подставить из класса констант Сonst перечисление (Enum), взять из него имя формы просмотра отчета (viewReportForm)  и вернуть ее как строку в качестве результата метода  viewReportForm. А в ноде у них стоит - action="#{reportController.viewReportForm}" у commandLink'а. Он читает название отчета и просто как по ссылке по нему переходит. И тут встала проблема....

Бля, ну не нравится мне этот commandLink и прочие линки. К тому же он как-то плохо работает с деревом, особенно когда стоит обработчик <p:ajax... Там возникают какие-то траблы с последовательностью. Ну например:

- если определять селект (выбранную ноду) то акшенлистенер в комманд-линке срабатывает только со второго раза. То есть на ноду надо нажать 2 раза.
- если просить его заслать сообщение в growl, учитывая что сообщение еще и отправляется из onNodeSelect, который стоит на Аяксе (<p:ajax) то выводится только сообщение от Аякса. А если у комманд-линка поставить ajax="false", то его сообщения перекрывают те, что выводит onNodeSelect. В итоге, пока я сделал так, что редирект просто осуществляется вот такой вот херней:

  FacesContext.getCurrentInstance().getApplication().getNavigationHandler().handleNavigation(FacesContext.getCurrentInstance(), null, "viewReportForm.xhtml");

  Но я таки решил сделать тут "fork" небольшой и попробовать помучаться с версией все же с commandLink, убрав Ajax (в смысле <p:ajax) совсем.

  До встрече в следующей ревизии, друзья!